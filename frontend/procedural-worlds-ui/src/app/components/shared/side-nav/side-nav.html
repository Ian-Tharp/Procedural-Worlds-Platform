<nav class="side-nav">
  <div class="nav-sections">
    @for (section of navSections(); track section.title) {
      <mat-expansion-panel [expanded]="section.expanded" class="nav-section">
        <mat-expansion-panel-header>
          <mat-icon>{{ section.icon }}</mat-icon>
          <span class="section-title">{{ section.title }}</span>
        </mat-expansion-panel-header>
        
        <mat-nav-list>
          @for (item of section.items; track item.label) {
            @if (item.route) {
              <a mat-list-item [routerLink]="item.route" routerLinkActive="active">
                @if (item.icon) {
                  <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
                }
                <span matListItemTitle>{{ item.label }}</span>
              </a>
            } @else {
              <a mat-list-item 
                 (click)="item.action?.()" 
                 (keyup.enter)="item.action?.()"
                 (keyup.space)="item.action?.()"
                 tabindex="0"
                 role="button"
                 [attr.aria-label]="'Action: ' + item.label">
                @if (item.icon) {
                  <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
                }
                <span matListItemTitle>{{ item.label }}</span>
              </a>
            }
          }
        </mat-nav-list>
      </mat-expansion-panel>
    }
  </div>
  
  <div class="nav-footer">
    <button mat-flat-button color="primary" class="enter-commons-btn" routerLink="/commons">
      <mat-icon>public</mat-icon>
      Enter The Commons
    </button>
  </div>
</nav>
